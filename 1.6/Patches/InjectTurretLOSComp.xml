<?xml version="1.0" encoding="utf-8"?>
<Patch>
  <!-- Inject the LOS gizmo comp onto every turret building.
       XPath matches any ThingDef whose thingClass is exactly Building_Turret
       or a known subclass. We use a broad match on the building tag to catch
       modded turrets too: any ThingDef that has a <building> node AND a
       turretGunDef child gets the comp injected. -->
  <Operation Class="PatchOperationAdd">
    <success>Always</success>
    <xpath>Defs/ThingDef[building/turretGunDef]</xpath>
    <value>
      <comps>
        <li Class="LOSOverlay.CompProperties_LOSMode" />
      </comps>
    </value>
  </Operation>
</Patch>
